<!doctype html>
<html>
  <head>
    <title>Public Discourse</title>
    <style>
      .word {
        background-color: #aaa;
        margin-right: 0.5em;
      }
    </style>
  </head>

  <body>
    <h1>Client A</h1>
    <div id="messages"></div>
    <input type="text" name="input" id="word-input" />

    <script src="https://cdn.socket.io/socket.io-1.2.0.js"></script>
    <script src="http://code.jquery.com/jquery-1.11.1.js"></script>
    <script src="https://craig.global.ssl.fastly.net/js/mousetrap/mousetrap.min.js"></script>
    <script>
      var socket = io();

      function sendWords(words) {
        var splitWords = words.split(/\s+/g);
        splitWords.forEach(function(w) {
          if (w.length > 0) {
            socket.emit('client_a_word', w);

            var span = $( document.createElement('span') );
            span.addClass('word').text(w);
            $("#messages").append(span);
          }
        });
      }

      $("#word-input").on({
        input: function() {
          if (this.value.search(/\s/g) != -1) {
            sendWords(this.value);
            this.value = "";
          }
        }
      });
    </script>
  </body>
</html>